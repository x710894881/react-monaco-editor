{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as nodes from '../parser/cssNodes.js';\nimport { Range, DiagnosticSeverity } from '../../vscode-languageserver-types/main.js';\nimport { LintConfigurationSettings, Rules } from './lintRules.js';\nimport { LintVisitor } from './lint.js';\n\nvar CSSValidation =\n/** @class */\nfunction () {\n  function CSSValidation() {}\n\n  CSSValidation.prototype.configure = function (settings) {\n    this.settings = settings;\n  };\n\n  CSSValidation.prototype.doValidation = function (document, stylesheet, settings) {\n    if (settings === void 0) {\n      settings = this.settings;\n    }\n\n    if (settings && settings.validate === false) {\n      return [];\n    }\n\n    var entries = [];\n    entries.push.apply(entries, nodes.ParseErrorCollector.entries(stylesheet));\n    entries.push.apply(entries, LintVisitor.entries(stylesheet, document, new LintConfigurationSettings(settings && settings.lint)));\n    var ruleIds = [];\n\n    for (var r in Rules) {\n      ruleIds.push(Rules[r].id);\n    }\n\n    function toDiagnostic(marker) {\n      var range = Range.create(document.positionAt(marker.getOffset()), document.positionAt(marker.getOffset() + marker.getLength()));\n      var source = document.languageId;\n      return {\n        code: marker.getRule().id,\n        source: source,\n        message: marker.getMessage(),\n        severity: marker.getLevel() === nodes.Level.Warning ? DiagnosticSeverity.Warning : DiagnosticSeverity.Error,\n        range: range\n      };\n    }\n\n    return entries.filter(function (entry) {\n      return entry.getLevel() !== nodes.Level.Ignore;\n    }).map(toDiagnostic);\n  };\n\n  return CSSValidation;\n}();\n\nexport { CSSValidation };","map":null,"metadata":{},"sourceType":"module"}