{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './currentLineMarginHighlight.css';\nimport { DynamicViewOverlay } from '../../view/dynamicViewOverlay.js';\nimport { editorLineHighlight, editorLineHighlightBorder } from '../../../common/view/editorColorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\n\nvar CurrentLineMarginHighlightOverlay =\n/** @class */\nfunction (_super) {\n  __extends(CurrentLineMarginHighlightOverlay, _super);\n\n  function CurrentLineMarginHighlightOverlay(context) {\n    var _this = _super.call(this) || this;\n\n    _this._context = context;\n    _this._lineHeight = _this._context.configuration.editor.lineHeight;\n    _this._renderLineHighlight = _this._context.configuration.editor.viewInfo.renderLineHighlight;\n    _this._selectionIsEmpty = true;\n    _this._primaryCursorLineNumber = 1;\n    _this._contentLeft = _this._context.configuration.editor.layoutInfo.contentLeft;\n\n    _this._context.addEventHandler(_this);\n\n    return _this;\n  }\n\n  CurrentLineMarginHighlightOverlay.prototype.dispose = function () {\n    this._context.removeEventHandler(this);\n\n    _super.prototype.dispose.call(this);\n  }; // --- begin event handlers\n\n\n  CurrentLineMarginHighlightOverlay.prototype.onConfigurationChanged = function (e) {\n    if (e.lineHeight) {\n      this._lineHeight = this._context.configuration.editor.lineHeight;\n    }\n\n    if (e.viewInfo) {\n      this._renderLineHighlight = this._context.configuration.editor.viewInfo.renderLineHighlight;\n    }\n\n    if (e.layoutInfo) {\n      this._contentLeft = this._context.configuration.editor.layoutInfo.contentLeft;\n    }\n\n    return true;\n  };\n\n  CurrentLineMarginHighlightOverlay.prototype.onCursorStateChanged = function (e) {\n    var hasChanged = false;\n    var primaryCursorLineNumber = e.selections[0].positionLineNumber;\n\n    if (this._primaryCursorLineNumber !== primaryCursorLineNumber) {\n      this._primaryCursorLineNumber = primaryCursorLineNumber;\n      hasChanged = true;\n    }\n\n    var selectionIsEmpty = e.selections[0].isEmpty();\n\n    if (this._selectionIsEmpty !== selectionIsEmpty) {\n      this._selectionIsEmpty = selectionIsEmpty;\n      return true;\n    }\n\n    return hasChanged;\n  };\n\n  CurrentLineMarginHighlightOverlay.prototype.onFlushed = function (e) {\n    return true;\n  };\n\n  CurrentLineMarginHighlightOverlay.prototype.onLinesDeleted = function (e) {\n    return true;\n  };\n\n  CurrentLineMarginHighlightOverlay.prototype.onLinesInserted = function (e) {\n    return true;\n  };\n\n  CurrentLineMarginHighlightOverlay.prototype.onZonesChanged = function (e) {\n    return true;\n  }; // --- end event handlers\n\n\n  CurrentLineMarginHighlightOverlay.prototype.prepareRender = function (ctx) {};\n\n  CurrentLineMarginHighlightOverlay.prototype.render = function (startLineNumber, lineNumber) {\n    if (lineNumber === this._primaryCursorLineNumber) {\n      var className = 'current-line';\n\n      if (this._shouldShowCurrentLine()) {\n        var paintedInContent = this._willRenderContentCurrentLine();\n\n        className = 'current-line current-line-margin' + (paintedInContent ? ' current-line-margin-both' : '');\n      }\n\n      return '<div class=\"' + className + '\" style=\"width:' + String(this._contentLeft) + 'px; height:' + String(this._lineHeight) + 'px;\"></div>';\n    }\n\n    return '';\n  };\n\n  CurrentLineMarginHighlightOverlay.prototype._shouldShowCurrentLine = function () {\n    return this._renderLineHighlight === 'gutter' || this._renderLineHighlight === 'all';\n  };\n\n  CurrentLineMarginHighlightOverlay.prototype._willRenderContentCurrentLine = function () {\n    return (this._renderLineHighlight === 'line' || this._renderLineHighlight === 'all') && this._selectionIsEmpty;\n  };\n\n  return CurrentLineMarginHighlightOverlay;\n}(DynamicViewOverlay);\n\nexport { CurrentLineMarginHighlightOverlay };\nregisterThemingParticipant(function (theme, collector) {\n  var lineHighlight = theme.getColor(editorLineHighlight);\n\n  if (lineHighlight) {\n    collector.addRule(\".monaco-editor .margin-view-overlays .current-line-margin { background-color: \" + lineHighlight + \"; border: none; }\");\n  } else {\n    var lineHighlightBorder = theme.getColor(editorLineHighlightBorder);\n\n    if (lineHighlightBorder) {\n      collector.addRule(\".monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid \" + lineHighlightBorder + \"; }\");\n    }\n\n    if (theme.type === 'hc') {\n      collector.addRule(\".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }\");\n    }\n  }\n});","map":null,"metadata":{},"sourceType":"module"}