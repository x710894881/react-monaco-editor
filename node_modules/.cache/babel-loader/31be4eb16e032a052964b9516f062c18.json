{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar HTMLDataProvider =\n/** @class */\nfunction () {\n  /**\n   * Currently, unversioned data uses the V1 implementation\n   * In the future when the provider handles multiple versions of HTML custom data,\n   * use the latest implementation for unversioned data\n   */\n  function HTMLDataProvider(id, customData) {\n    var _this = this;\n\n    this.id = id;\n    this._tags = [];\n    this._tagMap = {};\n    this._attributeMap = {};\n    this._valueSetMap = {};\n    this._tags = customData.tags || [];\n    this._globalAttributes = customData.globalAttributes || [];\n\n    this._tags.forEach(function (t) {\n      _this._tagMap[t.name] = t;\n\n      if (t.attributes) {\n        t.attributes.forEach(function (a) {\n          _this._attributeMap[a.name] = a;\n        });\n      }\n    });\n\n    this._globalAttributes.forEach(function (a) {\n      _this._attributeMap[a.name] = a;\n    });\n\n    if (customData.valueSets) {\n      customData.valueSets.forEach(function (vs) {\n        _this._valueSetMap[vs.name] = vs.values;\n      });\n    }\n  }\n\n  HTMLDataProvider.prototype.isApplicable = function () {\n    return true;\n  };\n\n  HTMLDataProvider.prototype.getId = function () {\n    return this.id;\n  };\n\n  HTMLDataProvider.prototype.provideTags = function () {\n    return this._tags;\n  };\n\n  HTMLDataProvider.prototype.provideAttributes = function (tag) {\n    var attributes = [];\n\n    var processAttribute = function (a) {\n      attributes.push({\n        name: a.name,\n        description: a.description,\n        valueSet: a.valueSet\n      });\n    };\n\n    if (this._tagMap[tag]) {\n      this._tagMap[tag].attributes.forEach(function (a) {\n        processAttribute(a);\n      });\n    }\n\n    this._globalAttributes.forEach(function (ga) {\n      processAttribute(ga);\n    });\n\n    return attributes;\n  };\n\n  HTMLDataProvider.prototype.provideValues = function (tag, attribute) {\n    var _this = this;\n\n    var values = [];\n\n    var processAttributes = function (attributes) {\n      attributes.forEach(function (a) {\n        if (a.name === attribute) {\n          if (a.values) {\n            a.values.forEach(function (v) {\n              values.push(v);\n            });\n          }\n\n          if (a.valueSet) {\n            if (_this._valueSetMap[a.valueSet]) {\n              _this._valueSetMap[a.valueSet].forEach(function (v) {\n                values.push(v);\n              });\n            }\n          }\n        }\n      });\n    };\n\n    if (!this._tagMap[tag]) {\n      return [];\n    }\n\n    processAttributes(this._tagMap[tag].attributes);\n    processAttributes(this._globalAttributes);\n    return values;\n  };\n\n  return HTMLDataProvider;\n}();\n\nexport { HTMLDataProvider };","map":null,"metadata":{},"sourceType":"module"}