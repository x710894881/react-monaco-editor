{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict'; // Allow for running under nodejs/requirejs in tests\n\nvar _monaco = typeof monaco === 'undefined' ? self.monaco : monaco;\n\nvar languageDefinitions = {};\n\nfunction _loadLanguage(languageId) {\n  var loader = languageDefinitions[languageId].loader;\n  return loader().then(function (mod) {\n    _monaco.languages.setMonarchTokensProvider(languageId, mod.language);\n\n    _monaco.languages.setLanguageConfiguration(languageId, mod.conf);\n  });\n}\n\nvar languagePromises = {};\nexport function loadLanguage(languageId) {\n  if (!languagePromises[languageId]) {\n    languagePromises[languageId] = _loadLanguage(languageId);\n  }\n\n  return languagePromises[languageId];\n}\nexport function registerLanguage(def) {\n  var languageId = def.id;\n  languageDefinitions[languageId] = def;\n\n  _monaco.languages.register(def);\n\n  _monaco.languages.onLanguage(languageId, function () {\n    loadLanguage(languageId);\n  });\n}","map":null,"metadata":{},"sourceType":"module"}