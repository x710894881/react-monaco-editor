{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './findInput.css';\nimport * as nls from '../../../../nls.js';\nimport * as dom from '../../dom.js';\nimport { HistoryInputBox } from '../inputbox/inputBox.js';\nimport { Widget } from '../widget.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Checkbox } from '../checkbox/checkbox.js';\nvar NLS_DEFAULT_LABEL = nls.localize('defaultLabel', \"input\");\nvar NLS_PRESERVE_CASE_LABEL = nls.localize('label.preserveCaseCheckbox', \"Preserve Case\");\n\nvar PreserveCaseCheckbox =\n/** @class */\nfunction (_super) {\n  __extends(PreserveCaseCheckbox, _super);\n\n  function PreserveCaseCheckbox(opts) {\n    return _super.call(this, {\n      // TODO: does this need its own icon?\n      actionClassName: 'monaco-case-sensitive',\n      title: NLS_PRESERVE_CASE_LABEL + opts.appendTitle,\n      isChecked: opts.isChecked,\n      inputActiveOptionBorder: opts.inputActiveOptionBorder\n    }) || this;\n  }\n\n  return PreserveCaseCheckbox;\n}(Checkbox);\n\nexport { PreserveCaseCheckbox };\n\nvar ReplaceInput =\n/** @class */\nfunction (_super) {\n  __extends(ReplaceInput, _super);\n\n  function ReplaceInput(parent, contextViewProvider, _showOptionButtons, options) {\n    var _this = _super.call(this) || this;\n\n    _this._showOptionButtons = _showOptionButtons;\n    _this.fixFocusOnOptionClickEnabled = true;\n    _this.cachedOptionsWidth = 0;\n    _this._onDidOptionChange = _this._register(new Emitter());\n    _this.onDidOptionChange = _this._onDidOptionChange.event;\n    _this._onKeyDown = _this._register(new Emitter());\n    _this.onKeyDown = _this._onKeyDown.event;\n    _this._onMouseDown = _this._register(new Emitter());\n    _this._onInput = _this._register(new Emitter());\n    _this._onKeyUp = _this._register(new Emitter());\n    _this._onPreserveCaseKeyDown = _this._register(new Emitter());\n    _this.onPreserveCaseKeyDown = _this._onPreserveCaseKeyDown.event;\n    _this.contextViewProvider = contextViewProvider;\n    _this.placeholder = options.placeholder || '';\n    _this.validation = options.validation;\n    _this.label = options.label || NLS_DEFAULT_LABEL;\n    _this.inputActiveOptionBorder = options.inputActiveOptionBorder;\n    _this.inputBackground = options.inputBackground;\n    _this.inputForeground = options.inputForeground;\n    _this.inputBorder = options.inputBorder;\n    _this.inputValidationInfoBorder = options.inputValidationInfoBorder;\n    _this.inputValidationInfoBackground = options.inputValidationInfoBackground;\n    _this.inputValidationInfoForeground = options.inputValidationInfoForeground;\n    _this.inputValidationWarningBorder = options.inputValidationWarningBorder;\n    _this.inputValidationWarningBackground = options.inputValidationWarningBackground;\n    _this.inputValidationWarningForeground = options.inputValidationWarningForeground;\n    _this.inputValidationErrorBorder = options.inputValidationErrorBorder;\n    _this.inputValidationErrorBackground = options.inputValidationErrorBackground;\n    _this.inputValidationErrorForeground = options.inputValidationErrorForeground;\n    var flexibleHeight = !!options.flexibleHeight;\n    var flexibleWidth = !!options.flexibleWidth;\n    var flexibleMaxHeight = options.flexibleMaxHeight;\n\n    _this.buildDomNode(options.history || [], flexibleHeight, flexibleWidth, flexibleMaxHeight);\n\n    if (parent) {\n      parent.appendChild(_this.domNode);\n    }\n\n    _this.onkeydown(_this.inputBox.inputElement, function (e) {\n      return _this._onKeyDown.fire(e);\n    });\n\n    _this.onkeyup(_this.inputBox.inputElement, function (e) {\n      return _this._onKeyUp.fire(e);\n    });\n\n    _this.oninput(_this.inputBox.inputElement, function (e) {\n      return _this._onInput.fire();\n    });\n\n    _this.onmousedown(_this.inputBox.inputElement, function (e) {\n      return _this._onMouseDown.fire(e);\n    });\n\n    return _this;\n  }\n\n  ReplaceInput.prototype.enable = function () {\n    dom.removeClass(this.domNode, 'disabled');\n    this.inputBox.enable();\n    this.preserveCase.enable();\n  };\n\n  ReplaceInput.prototype.disable = function () {\n    dom.addClass(this.domNode, 'disabled');\n    this.inputBox.disable();\n    this.preserveCase.disable();\n  };\n\n  ReplaceInput.prototype.setEnabled = function (enabled) {\n    if (enabled) {\n      this.enable();\n    } else {\n      this.disable();\n    }\n  };\n\n  ReplaceInput.prototype.style = function (styles) {\n    this.inputActiveOptionBorder = styles.inputActiveOptionBorder;\n    this.inputBackground = styles.inputBackground;\n    this.inputForeground = styles.inputForeground;\n    this.inputBorder = styles.inputBorder;\n    this.inputValidationInfoBackground = styles.inputValidationInfoBackground;\n    this.inputValidationInfoForeground = styles.inputValidationInfoForeground;\n    this.inputValidationInfoBorder = styles.inputValidationInfoBorder;\n    this.inputValidationWarningBackground = styles.inputValidationWarningBackground;\n    this.inputValidationWarningForeground = styles.inputValidationWarningForeground;\n    this.inputValidationWarningBorder = styles.inputValidationWarningBorder;\n    this.inputValidationErrorBackground = styles.inputValidationErrorBackground;\n    this.inputValidationErrorForeground = styles.inputValidationErrorForeground;\n    this.inputValidationErrorBorder = styles.inputValidationErrorBorder;\n    this.applyStyles();\n  };\n\n  ReplaceInput.prototype.applyStyles = function () {\n    if (this.domNode) {\n      var checkBoxStyles = {\n        inputActiveOptionBorder: this.inputActiveOptionBorder\n      };\n      this.preserveCase.style(checkBoxStyles);\n      var inputBoxStyles = {\n        inputBackground: this.inputBackground,\n        inputForeground: this.inputForeground,\n        inputBorder: this.inputBorder,\n        inputValidationInfoBackground: this.inputValidationInfoBackground,\n        inputValidationInfoForeground: this.inputValidationInfoForeground,\n        inputValidationInfoBorder: this.inputValidationInfoBorder,\n        inputValidationWarningBackground: this.inputValidationWarningBackground,\n        inputValidationWarningForeground: this.inputValidationWarningForeground,\n        inputValidationWarningBorder: this.inputValidationWarningBorder,\n        inputValidationErrorBackground: this.inputValidationErrorBackground,\n        inputValidationErrorForeground: this.inputValidationErrorForeground,\n        inputValidationErrorBorder: this.inputValidationErrorBorder\n      };\n      this.inputBox.style(inputBoxStyles);\n    }\n  };\n\n  ReplaceInput.prototype.select = function () {\n    this.inputBox.select();\n  };\n\n  ReplaceInput.prototype.focus = function () {\n    this.inputBox.focus();\n  };\n\n  ReplaceInput.prototype.getPreserveCase = function () {\n    return this.preserveCase.checked;\n  };\n\n  ReplaceInput.prototype.setPreserveCase = function (value) {\n    this.preserveCase.checked = value;\n  };\n\n  ReplaceInput.prototype.focusOnPreserve = function () {\n    this.preserveCase.focus();\n  };\n\n  ReplaceInput.prototype.buildDomNode = function (history, flexibleHeight, flexibleWidth, flexibleMaxHeight) {\n    var _this = this;\n\n    this.domNode = document.createElement('div');\n    dom.addClass(this.domNode, 'monaco-findInput');\n    this.inputBox = this._register(new HistoryInputBox(this.domNode, this.contextViewProvider, {\n      ariaLabel: this.label || '',\n      placeholder: this.placeholder || '',\n      validationOptions: {\n        validation: this.validation\n      },\n      inputBackground: this.inputBackground,\n      inputForeground: this.inputForeground,\n      inputBorder: this.inputBorder,\n      inputValidationInfoBackground: this.inputValidationInfoBackground,\n      inputValidationInfoForeground: this.inputValidationInfoForeground,\n      inputValidationInfoBorder: this.inputValidationInfoBorder,\n      inputValidationWarningBackground: this.inputValidationWarningBackground,\n      inputValidationWarningForeground: this.inputValidationWarningForeground,\n      inputValidationWarningBorder: this.inputValidationWarningBorder,\n      inputValidationErrorBackground: this.inputValidationErrorBackground,\n      inputValidationErrorForeground: this.inputValidationErrorForeground,\n      inputValidationErrorBorder: this.inputValidationErrorBorder,\n      history: history,\n      flexibleHeight: flexibleHeight,\n      flexibleWidth: flexibleWidth,\n      flexibleMaxHeight: flexibleMaxHeight\n    }));\n    this.preserveCase = this._register(new PreserveCaseCheckbox({\n      appendTitle: '',\n      isChecked: false,\n      inputActiveOptionBorder: this.inputActiveOptionBorder\n    }));\n\n    this._register(this.preserveCase.onChange(function (viaKeyboard) {\n      _this._onDidOptionChange.fire(viaKeyboard);\n\n      if (!viaKeyboard && _this.fixFocusOnOptionClickEnabled) {\n        _this.inputBox.focus();\n      }\n\n      _this.validate();\n    }));\n\n    this._register(this.preserveCase.onKeyDown(function (e) {\n      _this._onPreserveCaseKeyDown.fire(e);\n    }));\n\n    if (this._showOptionButtons) {\n      this.cachedOptionsWidth = this.preserveCase.width();\n    } else {\n      this.cachedOptionsWidth = 0;\n    } // Arrow-Key support to navigate between options\n\n\n    var indexes = [this.preserveCase.domNode];\n    this.onkeydown(this.domNode, function (event) {\n      if (event.equals(15\n      /* LeftArrow */\n      ) || event.equals(17\n      /* RightArrow */\n      ) || event.equals(9\n      /* Escape */\n      )) {\n        var index = indexes.indexOf(document.activeElement);\n\n        if (index >= 0) {\n          var newIndex = -1;\n\n          if (event.equals(17\n          /* RightArrow */\n          )) {\n            newIndex = (index + 1) % indexes.length;\n          } else if (event.equals(15\n          /* LeftArrow */\n          )) {\n            if (index === 0) {\n              newIndex = indexes.length - 1;\n            } else {\n              newIndex = index - 1;\n            }\n          }\n\n          if (event.equals(9\n          /* Escape */\n          )) {\n            indexes[index].blur();\n          } else if (newIndex >= 0) {\n            indexes[newIndex].focus();\n          }\n\n          dom.EventHelper.stop(event, true);\n        }\n      }\n    });\n    var controls = document.createElement('div');\n    controls.className = 'controls';\n    controls.style.display = this._showOptionButtons ? 'block' : 'none';\n    controls.appendChild(this.preserveCase.domNode);\n    this.domNode.appendChild(controls);\n  };\n\n  ReplaceInput.prototype.validate = function () {\n    if (this.inputBox) {\n      this.inputBox.validate();\n    }\n  };\n\n  Object.defineProperty(ReplaceInput.prototype, \"width\", {\n    set: function (newWidth) {\n      this.inputBox.paddingRight = this.cachedOptionsWidth;\n      this.inputBox.width = newWidth;\n      this.domNode.style.width = newWidth + 'px';\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ReplaceInput.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n  };\n\n  return ReplaceInput;\n}(Widget);\n\nexport { ReplaceInput };","map":null,"metadata":{},"sourceType":"module"}