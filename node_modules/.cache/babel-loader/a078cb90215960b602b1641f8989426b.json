{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nexport var FIN = {\n  done: true,\n  value: undefined\n};\nexport var Iterator;\n\n(function (Iterator) {\n  var _empty = {\n    next: function () {\n      return FIN;\n    }\n  };\n\n  function empty() {\n    return _empty;\n  }\n\n  Iterator.empty = empty;\n\n  function single(value) {\n    var done = false;\n    return {\n      next: function () {\n        if (done) {\n          return FIN;\n        }\n\n        done = true;\n        return {\n          done: false,\n          value: value\n        };\n      }\n    };\n  }\n\n  Iterator.single = single;\n\n  function fromArray(array, index, length) {\n    if (index === void 0) {\n      index = 0;\n    }\n\n    if (length === void 0) {\n      length = array.length;\n    }\n\n    return {\n      next: function () {\n        if (index >= length) {\n          return FIN;\n        }\n\n        return {\n          done: false,\n          value: array[index++]\n        };\n      }\n    };\n  }\n\n  Iterator.fromArray = fromArray;\n\n  function from(elements) {\n    if (!elements) {\n      return Iterator.empty();\n    } else if (Array.isArray(elements)) {\n      return Iterator.fromArray(elements);\n    } else {\n      return elements;\n    }\n  }\n\n  Iterator.from = from;\n\n  function map(iterator, fn) {\n    return {\n      next: function () {\n        var element = iterator.next();\n\n        if (element.done) {\n          return FIN;\n        } else {\n          return {\n            done: false,\n            value: fn(element.value)\n          };\n        }\n      }\n    };\n  }\n\n  Iterator.map = map;\n\n  function filter(iterator, fn) {\n    return {\n      next: function () {\n        while (true) {\n          var element = iterator.next();\n\n          if (element.done) {\n            return FIN;\n          }\n\n          if (fn(element.value)) {\n            return {\n              done: false,\n              value: element.value\n            };\n          }\n        }\n      }\n    };\n  }\n\n  Iterator.filter = filter;\n\n  function forEach(iterator, fn) {\n    for (var next = iterator.next(); !next.done; next = iterator.next()) {\n      fn(next.value);\n    }\n  }\n\n  Iterator.forEach = forEach;\n\n  function collect(iterator, atMost) {\n    if (atMost === void 0) {\n      atMost = Number.POSITIVE_INFINITY;\n    }\n\n    var result = [];\n\n    if (atMost === 0) {\n      return result;\n    }\n\n    var i = 0;\n\n    for (var next = iterator.next(); !next.done; next = iterator.next()) {\n      result.push(next.value);\n\n      if (++i >= atMost) {\n        break;\n      }\n    }\n\n    return result;\n  }\n\n  Iterator.collect = collect;\n\n  function concat() {\n    var iterators = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      iterators[_i] = arguments[_i];\n    }\n\n    var i = 0;\n    return {\n      next: function () {\n        if (i >= iterators.length) {\n          return FIN;\n        }\n\n        var iterator = iterators[i];\n        var result = iterator.next();\n\n        if (result.done) {\n          i++;\n          return this.next();\n        }\n\n        return result;\n      }\n    };\n  }\n\n  Iterator.concat = concat;\n})(Iterator || (Iterator = {}));\n\nexport function getSequenceIterator(arg) {\n  if (Array.isArray(arg)) {\n    return Iterator.fromArray(arg);\n  } else {\n    return arg;\n  }\n}\n\nvar ArrayIterator =\n/** @class */\nfunction () {\n  function ArrayIterator(items, start, end, index) {\n    if (start === void 0) {\n      start = 0;\n    }\n\n    if (end === void 0) {\n      end = items.length;\n    }\n\n    if (index === void 0) {\n      index = start - 1;\n    }\n\n    this.items = items;\n    this.start = start;\n    this.end = end;\n    this.index = index;\n  }\n\n  ArrayIterator.prototype.first = function () {\n    this.index = this.start;\n    return this.current();\n  };\n\n  ArrayIterator.prototype.next = function () {\n    this.index = Math.min(this.index + 1, this.end);\n    return this.current();\n  };\n\n  ArrayIterator.prototype.current = function () {\n    if (this.index === this.start - 1 || this.index === this.end) {\n      return null;\n    }\n\n    return this.items[this.index];\n  };\n\n  return ArrayIterator;\n}();\n\nexport { ArrayIterator };\n\nvar ArrayNavigator =\n/** @class */\nfunction (_super) {\n  __extends(ArrayNavigator, _super);\n\n  function ArrayNavigator(items, start, end, index) {\n    if (start === void 0) {\n      start = 0;\n    }\n\n    if (end === void 0) {\n      end = items.length;\n    }\n\n    if (index === void 0) {\n      index = start - 1;\n    }\n\n    return _super.call(this, items, start, end, index) || this;\n  }\n\n  ArrayNavigator.prototype.current = function () {\n    return _super.prototype.current.call(this);\n  };\n\n  ArrayNavigator.prototype.previous = function () {\n    this.index = Math.max(this.index - 1, this.start - 1);\n    return this.current();\n  };\n\n  ArrayNavigator.prototype.first = function () {\n    this.index = this.start;\n    return this.current();\n  };\n\n  ArrayNavigator.prototype.last = function () {\n    this.index = this.end - 1;\n    return this.current();\n  };\n\n  ArrayNavigator.prototype.parent = function () {\n    return null;\n  };\n\n  return ArrayNavigator;\n}(ArrayIterator);\n\nexport { ArrayNavigator };\n\nvar MappedIterator =\n/** @class */\nfunction () {\n  function MappedIterator(iterator, fn) {\n    this.iterator = iterator;\n    this.fn = fn; // noop\n  }\n\n  MappedIterator.prototype.next = function () {\n    return this.fn(this.iterator.next());\n  };\n\n  return MappedIterator;\n}();\n\nexport { MappedIterator };","map":null,"metadata":{},"sourceType":"module"}